<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bookstore.dao.BookCustomMapper">

    <sql id="Base_Column_List">
    id, bookname, price, category_id, author, publish_time, sell_point, created, updated, 
    inventory, sales_volume, state
  </sql>

    <select id="countBooks" resultType="com.bookstore.pojo.vo.CountBook">
    select
        sum(case when b.category_id in(19,20,21,22) then 1 else 0 end ) child,
        sum(case when b.category_id in (23,24,25) then 1 else 0 end ) literature,
        sum(case when b.category_id in (26,27,28) then 1 else 0 end ) novel,
        sum(case when b.category_id in (29,30,31,32) then 1 else 0 end ) economicManagement,
        sum(case when b.category_id in (33,34,35,36) then 1 else 0 end ) life,
        sum(case when b.category_id in (37,38,39) then 1 else 0 end ) exam
    from book b;
  </select>
</mapper>